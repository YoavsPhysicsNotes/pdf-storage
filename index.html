<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>Yoav's Physics PDFs</title>

  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI";
      max-width: 800px;
      margin: 40px auto;
      padding: 0 16px;
      direction: rtl;
      text-align: right;
      background: #f9fafb;
    }

    .logo-wrap {
      display: flex;
      justify-content: center;
      margin-bottom: 16px;
    }

    .logo-wrap img {
      max-height: 80px;
    }

    h1 {
      font-size: 1.4rem;
      margin-bottom: 1rem;
    }

    details {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      padding: 0.4rem 0.8rem 0.6rem;
      margin-bottom: 0.6rem;
    }

    summary {
      font-weight: 600;
      cursor: pointer;
      list-style: none;
      outline: none;
    }

    summary::-webkit-details-marker {
      display: none;
    }

    summary::before {
      content: "▸";
      display: inline-block;
      margin-left: 6px;
      transition: transform 0.15s ease-out;
    }

    details[open] summary::before {
      transform: rotate(90deg);
    }

    .pdf-link {
      text-decoration: none;
      color: #2563eb;
      font-size: 0.98rem;
    }

    .pdf-link:hover {
      text-decoration: underline;
    }

    .pdf-item {
      margin: 0.25rem 0;
      padding-right: 1.2rem;
    }
  </style>
</head>
<body>

  <div class="logo-wrap">
    <!-- עדכן את השם אם התמונה לא נקראת logo.png -->
    <img src="logo.png" alt="Yoav's Physics Notes">
  </div>

  <h1>Yoav's Physics PDFs</h1>
  <div id="content">טוען…</div>

  <script>
    const owner = "YoavsPhysicsNotes";
    const repo  = "pdf-storage";
    const proxy = "https://api.allorigins.win/raw?url=";

    async function get(path = "") {
      const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;
      const res = await fetch(proxy + encodeURIComponent(url));
      return res.ok ? await res.json() : [];
    }

    function isPdf(f) { return f.type === "file" && f.name.toLowerCase().endsWith(".pdf"); }
    function isDir(f) { return f.type === "dir"; }

    async function load() {
      const container = document.getElementById("content");
      container.innerHTML = "";

      const rootItems = await get("");
      const dirs = rootItems.filter(isDir);
      const rootPdfs = rootItems.filter(isPdf);

      // קבצים כלליים (לא בתיקייה)
      if (rootPdfs.length > 0) {
        const det = document.createElement("details");
        det.open = true;

        const sum = document.createElement("summary");
        sum.textContent = "קבצים כלליים";
        det.appendChild(sum);

        rootPdfs.forEach(f => {
          const div = document.createElement("div");
          div.className = "pdf-item";

          const a = document.createElement("a");
          a.className = "pdf-link";
          a.href = f.download_url;
          a.target = "_blank";
          a.textContent = f.name.replace(/\.pdf$/i, "");

          div.appendChild(a);
          det.appendChild(div);
        });

        container.appendChild(det);
      }

      // תיקיות
      for (const d of dirs) {
        const files = await get(d.path);
        const pdfs = files.filter(isPdf);
        if (!pdfs.length) continue;

        const det = document.createElement("details");
        const sum = document.createElement("summary");
        sum.textContent = d.name; // שם התיקייה כמו שהוא
        det.appendChild(sum);

        pdfs.forEach(f => {
          const div = document.createElement("div");
          div.className = "pdf-item";

          const a = document.createElement("a");
          a.className = "pdf-link";
          a.href = f.download_url;
          a.target = "_blank";
          a.textContent = f.name.replace(/\.pdf$/i, "");

          div.appendChild(a);
          det.appendChild(div);
        });

        container.appendChild(det);
      }

      if (!container.innerHTML.trim()) {
        container.textContent = "אין עדיין קבצים.";
      }
    }

    load();
  </script>
</body>
</html>
